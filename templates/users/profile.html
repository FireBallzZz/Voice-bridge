{% extends 'base.html' %}
{% block content %}

<style>
  /* Light Theme */
  :root {
    --bg-color: #ffffff;
    --text-color: #121212;
    --card-bg: rgba(0, 0, 0, 0.05);
    --card-border: rgba(0, 0, 0, 0.1);

    --btn-outline-color: #121212;
    --btn-outline-hover-bg: #121212;
    --btn-outline-hover-text: #ffffff;
  }

  /* Dark Theme */
  [data-theme="dark"] {
    --bg-color: #0d0d10;
    --text-color: #f5f5f5;
    --card-bg: rgba(255, 255, 255, 0.05);
    --card-border: rgba(255, 255, 255, 0.1);

    --btn-outline-color: #f5f5f5;     /* white border + text */
    --btn-outline-hover-bg: #f5f5f5;  /* hover bg white */
    --btn-outline-hover-text: #000000; /* hover text black */
  }

  body {
    background-color: var(--bg-color);
    color: var(--text-color);
    transition: all 0.3s ease;
  }

  .card {
    background-color: var(--card-bg);
    border: 1px solid var(--card-border);
    border-radius: 12px;
  }

  h3, h4, h5, p, strong {
    color: var(--text-color);
  }

  .btn-outline-primary {
    color: var(--btn-outline-color);
    border-color: var(--btn-outline-color);
    transition: all 0.3s ease;
  }
  .btn-outline-primary:hover {
    background-color: var(--btn-outline-hover-bg);
    color: var(--btn-outline-hover-text);
  }

  .badge {
    padding: 0.5em 0.75em;
    font-size: 0.9em;
    border-radius: 8px;
  }
  .bg-primary {
    background-color: #0d6efd !important;
  }
  .bg-secondary {
    background-color: #6c757d !important;
  }

  .profile-pic {
    border-radius: 8px;
    max-width: 150px;
    height: auto;
  }

  /* Responsive Design */
  @media (max-width: 576px) {
    .profile-pic {
      max-width: 100px;
    }
    h3 {
      font-size: 1.4rem;
    }
    h4 {
      font-size: 1.2rem;
    }
    h5 {
      font-size: 1rem;
    }
    .btn, .form-control {
      font-size: 0.9rem;
    }
  }
</style>

<div class="card mb-4">
  <div class="card-body text-center">
    {% if profile_user.profile_pic %}
      <img src="{{ profile_user.profile_pic.url }}" class="mb-3 profile-pic" alt="Profile Picture">
    {% else %}
      <img src="https://via.placeholder.com/150" class="mb-3 profile-pic" alt="Default Profile Picture">
    {% endif %}

    <h3>{{ profile_user.username }}</h3>
    <p>{{ profile_user.bio }}</p>
    <p><strong>Location:</strong> {{ profile_user.division }}, {{ profile_user.district }}, {{ profile_user.upazila }}</p>

    {% if request.user == profile_user %}
      <p><strong>NID Number:</strong> {{ profile_user.nid_number }}</p>
    {% else %}
      <p><strong>NID Number:</strong> üîí Confidential</p>
    {% endif %}

    {% if profile_user.is_verified %}
      <span class="badge bg-success">‚úÖ Verified</span>
    {% else %}
      <span class="badge bg-warning text-dark">‚è≥ Not Verified</span>
    {% endif %}

    {% if profile_user.is_govt %}
      <span class="badge bg-primary">Government User</span>
    {% else %}
      <span class="badge bg-secondary">Normal User</span>
    {% endif %}
  </div>
</div>

{% if request.user == profile_user and not request.user.is_verified %}
  <div class="card mb-4">
    <div class="card-body">
      <h5>üîê Verify Your Profile</h5>
      <form method="POST" action="{% url 'submit_nid' %}">
        {% csrf_token %}
        <div class="mb-3">
          <label for="nid" class="form-label">Enter Your NID Number</label>
          <input type="text" name="nid_number" class="form-control" required>
        </div>
        <button type="submit" class="btn btn-outline-primary">Submit for Verification</button>
      </form>
    </div>
  </div>
{% endif %}

<h4>{{ profile_user.username }}'s Posts</h4>
{% for post in posts %}
  <div class="card mb-3">
    <div class="card-body">
      <h5>{{ post.title }}</h5>
      <p>{{ post.description }}</p>
    </div>
  </div>
{% empty %}
  <p>No posts yet.</p>
{% endfor %}

{% if request.user == profile_user %}
  <a href="{% url 'edit_profile' %}" class="btn btn-outline-primary mb-3">‚úèÔ∏è Edit Profile</a>
{% endif %}

{% endblock %}
